<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="PhasmophobiaCompanion.Views.MainPage"
    xmlns="http://xamarin.com/schemas/2014/forms"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:yummy="clr-namespace:Xamarin.Forms.PancakeView;assembly=Xamarin.Forms.PancakeView"
    Padding="0,20,0,0"
    NavigationPage.HasNavigationBar="False">


    <ScrollView HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand">
        <yummy:PancakeView
            Margin="0,30,0,0"
            Padding="0,0,0,0"
            BackgroundColor="White"
            CornerRadius="16"
            VerticalOptions="FillAndExpand">
            <StackLayout Spacing="10">
                <!--  Special Mode  -->
                <yummy:PancakeView
                    Padding="10,10,10,10"
                    BackgroundColor="White"
                    CornerRadius="16">
                    <yummy:PancakeView.Shadow>
                        <yummy:DropShadow Offset="0,3" Color="#000000" />
                    </yummy:PancakeView.Shadow>
                    <yummy:PancakeView.Margin>
                        <Thickness>
                            10,3,10,10
                        </Thickness>
                    </yummy:PancakeView.Margin>
                    <yummy:PancakeView.Border>
                        <yummy:Border Thickness="1" Color="Color.Default" />
                    </yummy:PancakeView.Border>
                    <StackLayout>
                        <Label>
                            <Label.FormattedText>
                                <FormattedString>
                                    <Span Text="Special Mode: " />
                                    <Span Text="{Binding Path=ChallengeMode.Title}" />
                                </FormattedString>
                            </Label.FormattedText>
                        </Label>
                        <Label Text="{Binding ChallengeMode.Description}" />
                    </StackLayout>
                    <yummy:PancakeView.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnChallengeModeTapped" />
                    </yummy:PancakeView.GestureRecognizers>
                </yummy:PancakeView>

                <!--  Random Tip  -->
                <yummy:PancakeView
                    Padding="10,10,10,10"
                    BackgroundColor="White"
                    CornerRadius="16">
                    <yummy:PancakeView.Shadow>
                        <yummy:DropShadow Offset="0,3" Color="#000000" />
                    </yummy:PancakeView.Shadow>
                    <yummy:PancakeView.Margin>
                        <Thickness>
                            10,3,10,10
                        </Thickness>
                    </yummy:PancakeView.Margin>
                    <yummy:PancakeView.Border>
                        <yummy:Border Thickness="1" Color="Color.Default" />
                    </yummy:PancakeView.Border>
                    <Label Text="{Binding DisplayedTip}" />
                </yummy:PancakeView>
                <!--  Global Search  -->
                <yummy:PancakeView
                    Padding="10,10,10,10"
                    BackgroundColor="White"
                    CornerRadius="16">
                    <yummy:PancakeView.Shadow>
                        <yummy:DropShadow Offset="0,3" Color="#000000" />
                    </yummy:PancakeView.Shadow>
                    <yummy:PancakeView.Margin>
                        <Thickness>
                            10,3,10,10
                        </Thickness>
                    </yummy:PancakeView.Margin>
                    <yummy:PancakeView.Border>
                        <yummy:Border Thickness="1" Color="Color.Default" />
                    </yummy:PancakeView.Border>
                    <SearchBar Placeholder="Search..." />
                </yummy:PancakeView>
                <!--  Speeds and Sanity Thresholds in a Grid  -->
                <Grid HeightRequest="300">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="4*" />
                        <ColumnDefinition Width="3*" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Label
                        Grid.Row="0"
                        Grid.Column="0"
                        FontAttributes="Bold"
                        HorizontalTextAlignment="Center"
                        Text="{Binding GhostCommon.Speed}" />
                    <!--  Ghost Speeds  -->
                    <yummy:PancakeView
                        Grid.Row="1"
                        Grid.Column="0"
                        Padding="0,10,0,10"
                        BackgroundColor="White"
                        CornerRadius="16">
                        <yummy:PancakeView.Shadow>
                            <yummy:DropShadow Offset="0,3" Color="#000000" />
                        </yummy:PancakeView.Shadow>
                        <yummy:PancakeView.Margin>
                            <Thickness>
                                10,3,5,10
                            </Thickness>
                        </yummy:PancakeView.Margin>
                        <yummy:PancakeView.Border>
                            <yummy:Border Thickness="1" Color="Color.Default" />
                        </yummy:PancakeView.Border>

                        <StackLayout Orientation="Vertical">
                            <Label FontAttributes="Bold">
                                <Label.Padding>
                                    10,0,10,0
                                </Label.Padding>
                                <Label.FormattedText>
                                    <FormattedString>
                                        <Span Text="{Binding GhostCommon.GhostTitle}" />
                                        <Span Text=": " />
                                        <Span Text="{Binding GhostCommon.Min}">
                                            <Span.GestureRecognizers>
                                                <TapGestureRecognizer Tapped="OnMinSpeedHeaderTapped" />
                                            </Span.GestureRecognizers>
                                        </Span>
                                        <Span Text=" - " />
                                        <Span Text="{Binding GhostCommon.Max}">
                                            <Span.GestureRecognizers>
                                                <TapGestureRecognizer Tapped="OnMaxSpeedHeaderTapped" />
                                            </Span.GestureRecognizers>
                                        </Span>
                                        <Span Text="{Binding GhostCommon.LoS}">
                                            <Span.GestureRecognizers>
                                                <TapGestureRecognizer Tapped="OnMaxSpeedLoSHeaderTapped" />
                                            </Span.GestureRecognizers>
                                        </Span>
                                    </FormattedString>
                                </Label.FormattedText>
                            </Label>
                            <ListView ItemsSource="{Binding Ghosts}">
                                <ListView.ItemTemplate>
                                    <DataTemplate>
                                        <ViewCell>
                                            <Label Padding="10" LineBreakMode="NoWrap">
                                                <Label.FormattedText>
                                                    <FormattedString>
                                                        <Span Text="{Binding Title}">
                                                            <Span.GestureRecognizers>
                                                                <TapGestureRecognizer Tapped="OnGhostTapped" />
                                                            </Span.GestureRecognizers>
                                                        </Span>
                                                        <Span Text=": " />
                                                        <Span Text="{Binding MinGhostSpeed}">
                                                            <Span.GestureRecognizers>
                                                                <TapGestureRecognizer Tapped="OnMinGhostSpeedTapped" />
                                                            </Span.GestureRecognizers>
                                                        </Span>
                                                        <Span Text=" - " />
                                                        <Span Text="{Binding MaxGhostSpeed}">
                                                            <Span.GestureRecognizers>
                                                                <TapGestureRecognizer Tapped="OnMaxGhostSpeedTapped" />
                                                            </Span.GestureRecognizers>
                                                        </Span>
                                                        <Span Text=" (" />
                                                        <Span Text="{Binding MaxGhostSpeedLoS}">
                                                            <Span.GestureRecognizers>
                                                                <TapGestureRecognizer Tapped="OnMaxGhostSpeedLoSTapped" />
                                                            </Span.GestureRecognizers>
                                                        </Span>
                                                        <Span Text=")" />
                                                    </FormattedString>
                                                </Label.FormattedText>
                                            </Label>
                                        </ViewCell>
                                    </DataTemplate>
                                </ListView.ItemTemplate>
                            </ListView>

                        </StackLayout>
                    </yummy:PancakeView>

                    <Label
                        Grid.Row="0"
                        Grid.Column="1"
                        FontAttributes="Bold"
                        HorizontalTextAlignment="Center"
                        Text="{Binding GhostCommon.SanityHunt}" />
                    <!--  Sanity Thresholds  -->


                    <yummy:PancakeView
                        Grid.Row="1"
                        Grid.Column="1"
                        Padding="0,10,0,10"
                        BackgroundColor="White"
                        CornerRadius="16">
                        <yummy:PancakeView.Shadow>
                            <yummy:DropShadow Offset="0,3" Color="#000000" />
                        </yummy:PancakeView.Shadow>
                        <yummy:PancakeView.Margin>
                            <Thickness>
                                5,3,10,10
                            </Thickness>
                        </yummy:PancakeView.Margin>
                        <yummy:PancakeView.Border>
                            <yummy:Border Thickness="1" Color="Color.Default" />
                        </yummy:PancakeView.Border>
                        <StackLayout>
                            <Label FontAttributes="Bold">
                                <Label.Padding>
                                    10,0,10,0
                                </Label.Padding>
                                <Label.FormattedText>
                                    <FormattedString>
                                        <Span Text="{Binding GhostCommon.GhostTitle}" />
                                        <Span Text=": " />
                                        <Span Text="{Binding GhostCommon.Min}">
                                            <Span.GestureRecognizers>
                                                <TapGestureRecognizer Tapped="OnMinSanityHeaderTapped" />
                                            </Span.GestureRecognizers>
                                        </Span>
                                        <Span Text=" - " />
                                        <Span Text="{Binding GhostCommon.Max}">
                                            <Span.GestureRecognizers>
                                                <TapGestureRecognizer Tapped="OnMaxSanityHeaderTapped" />
                                            </Span.GestureRecognizers>
                                        </Span>
                                    </FormattedString>
                                </Label.FormattedText>
                            </Label>
                            <ListView ItemsSource="{Binding Ghosts}">
                                <ListView.ItemTemplate>
                                    <DataTemplate>
                                        <ViewCell>
                                            <Label Padding="10" LineBreakMode="NoWrap">
                                                <Label.FormattedText>
                                                    <FormattedString>
                                                        <Span Text="{Binding Title}">
                                                            <Span.GestureRecognizers>
                                                                <TapGestureRecognizer Tapped="OnGhostTapped" />
                                                            </Span.GestureRecognizers>
                                                        </Span>
                                                        <Span Text=": " />
                                                        <Span Text="{Binding MinSanityHunt}">
                                                            <Span.GestureRecognizers>
                                                                <TapGestureRecognizer Tapped="OnMinSanityHuntTapped" />
                                                            </Span.GestureRecognizers>
                                                        </Span>
                                                        <Span Text=" - " />
                                                        <Span Text="{Binding MaxSanityHunt}">
                                                            <Span.GestureRecognizers>
                                                                <TapGestureRecognizer Tapped="OnMaxSanityHuntTapped" />
                                                            </Span.GestureRecognizers>
                                                        </Span>
                                                    </FormattedString>
                                                </Label.FormattedText>
                                            </Label>
                                        </ViewCell>
                                    </DataTemplate>
                                </ListView.ItemTemplate>
                            </ListView>
                        </StackLayout>
                    </yummy:PancakeView>
                </Grid>
                <!--  Evidence List  -->
                <yummy:PancakeView
                    Padding="10,10,10,10"
                    BackgroundColor="White"
                    CornerRadius="16">
                    <yummy:PancakeView.Shadow>
                        <yummy:DropShadow Offset="0,3" Color="#000000" />
                    </yummy:PancakeView.Shadow>
                    <yummy:PancakeView.Margin>
                        <Thickness>
                            10,3,10,10
                        </Thickness>
                    </yummy:PancakeView.Margin>
                    <yummy:PancakeView.Border>
                        <yummy:Border Thickness="1" Color="Color.Default" />
                    </yummy:PancakeView.Border>
                    <FlexLayout
                        AlignContent="Start"
                        AlignItems="Start"
                        BindableLayout.ItemsSource="{Binding Clues}"
                        Direction="Row"
                        JustifyContent="Start"
                        Wrap="Wrap">
                        <BindableLayout.ItemTemplate>
                            <DataTemplate>
                                <yummy:PancakeView
                                    Padding="5,5,5,5"
                                    BackgroundColor="White"
                                    CornerRadius="10">
                                    <yummy:PancakeView.Shadow>
                                        <yummy:DropShadow Offset="0,3" Color="#000000" />
                                    </yummy:PancakeView.Shadow>
                                    <yummy:PancakeView.Margin>
                                        <Thickness>
                                            10,3,5,10
                                        </Thickness>
                                    </yummy:PancakeView.Margin>
                                    <yummy:PancakeView.Border>
                                        <yummy:Border Thickness="1" Color="Color.Default" />
                                    </yummy:PancakeView.Border>
                                    <StackLayout Orientation="Horizontal">
                                        <Image
                                            HeightRequest="30"
                                            Source="{Binding IconFilePath}"
                                            WidthRequest="30" />
                                        <Label
                                            HorizontalTextAlignment="Center"
                                            Text="{Binding Title}"
                                            VerticalOptions="Center" />
                                    </StackLayout>
                                    <yummy:PancakeView.GestureRecognizers>
                                        <TapGestureRecognizer Tapped="OnClueTapped" />
                                    </yummy:PancakeView.GestureRecognizers>
                                </yummy:PancakeView>
                            </DataTemplate>
                        </BindableLayout.ItemTemplate>
                    </FlexLayout>

                </yummy:PancakeView>

                <yummy:PancakeView
                    Padding="10,10,10,10"
                    BackgroundColor="White"
                    CornerRadius="16">
                    <yummy:PancakeView.Shadow>
                        <yummy:DropShadow Offset="0,3" Color="#000000" />
                    </yummy:PancakeView.Shadow>
                    <yummy:PancakeView.Margin>
                        <Thickness>
                            10,3,10,10
                        </Thickness>
                    </yummy:PancakeView.Margin>
                    <yummy:PancakeView.Border>
                        <yummy:Border Thickness="1" Color="Color.Default" />
                    </yummy:PancakeView.Border>
                    <FlexLayout
                        AlignContent="Start"
                        AlignItems="Start"
                        BindableLayout.ItemsSource="{Binding Difficulties}"
                        Direction="Column"
                        JustifyContent="Start"
                        Wrap="NoWrap">
                        <BindableLayout.ItemTemplate>
                            <DataTemplate>
                                <yummy:PancakeView
                                    Padding="10,10,10,10"
                                    BackgroundColor="White"
                                    CornerRadius="16">
                                    <StackLayout Orientation="Vertical">
                                        <Label FontAttributes="Bold" Text="{Binding Title}" />
                                        <Label Text="{Binding Description}" />
                                        <StackLayout.GestureRecognizers>
                                            <TapGestureRecognizer Tapped="OnDifficultyTapped" />
                                        </StackLayout.GestureRecognizers>
                                    </StackLayout>
                                </yummy:PancakeView>
                            </DataTemplate>
                        </BindableLayout.ItemTemplate>
                    </FlexLayout>

                </yummy:PancakeView>

                <!--  Released Patches  -->
                <yummy:PancakeView
                    Padding="10,10,10,10"
                    BackgroundColor="White"
                    CornerRadius="16">
                    <yummy:PancakeView.Shadow>
                        <yummy:DropShadow Offset="0,3" Color="#000000" />
                    </yummy:PancakeView.Shadow>
                    <yummy:PancakeView.Margin>
                        <Thickness>
                            10,3,10,10
                        </Thickness>
                    </yummy:PancakeView.Margin>
                    <yummy:PancakeView.Border>
                        <yummy:Border Thickness="1" Color="Color.Default" />
                    </yummy:PancakeView.Border>
                    <FlexLayout
                        AlignContent="Start"
                        AlignItems="Start"
                        BindableLayout.ItemsSource="{Binding Patches}"
                        Direction="Column"
                        JustifyContent="Start"
                        Wrap="NoWrap">
                        <BindableLayout.ItemTemplate>
                            <DataTemplate>
                                <StackLayout>
                                    <Label Text="{Binding Title}" TextColor="Blue">
                                        <Label.GestureRecognizers>
                                            <TapGestureRecognizer NumberOfTapsRequired="1" Tapped="OnPatchTapped" />
                                        </Label.GestureRecognizers>
                                    </Label>
                                </StackLayout>
                            </DataTemplate>
                        </BindableLayout.ItemTemplate>
                    </FlexLayout>
                </yummy:PancakeView>

                <!--  Daily and Weekly Quests in a Grid  -->
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <!--  Daily Quests  -->
                    <yummy:PancakeView
                        Grid.Column="0"
                        Padding="10,10,10,10"
                        BackgroundColor="White"
                        CornerRadius="16">
                        <yummy:PancakeView.Shadow>
                            <yummy:DropShadow Offset="0,3" Color="#000000" />
                        </yummy:PancakeView.Shadow>
                        <yummy:PancakeView.Margin>
                            <Thickness>
                                10,3,10,10
                            </Thickness>
                        </yummy:PancakeView.Margin>
                        <yummy:PancakeView.Border>
                            <yummy:Border Thickness="1" Color="Color.Default" />
                        </yummy:PancakeView.Border>
                        <FlexLayout
                            AlignContent="Start"
                            AlignItems="Start"
                            BindableLayout.ItemsSource="{Binding DailyQuest}"
                            Direction="Column"
                            JustifyContent="Start"
                            Wrap="NoWrap">
                            <BindableLayout.ItemTemplate>
                                <DataTemplate>
                                    <Label Text="{Binding Description}" />
                                </DataTemplate>
                            </BindableLayout.ItemTemplate>
                        </FlexLayout>
                    </yummy:PancakeView>

                    <!--  Weekly Quests  -->
                    <yummy:PancakeView
                        Grid.Column="1"
                        Padding="10,10,10,10"
                        BackgroundColor="White"
                        CornerRadius="16">
                        <yummy:PancakeView.Shadow>
                            <yummy:DropShadow Offset="0,3" Color="#000000" />
                        </yummy:PancakeView.Shadow>
                        <yummy:PancakeView.Margin>
                            <Thickness>
                                10,3,10,10
                            </Thickness>
                        </yummy:PancakeView.Margin>
                        <yummy:PancakeView.Border>
                            <yummy:Border Thickness="1" Color="Color.Default" />
                        </yummy:PancakeView.Border>
                        <FlexLayout
                            AlignContent="Start"
                            AlignItems="Start"
                            BindableLayout.ItemsSource="{Binding WeeklyQuest}"
                            Direction="Column"
                            JustifyContent="Start"
                            Wrap="NoWrap">
                            <BindableLayout.ItemTemplate>
                                <DataTemplate>
                                    <Label Text="{Binding Description}" />
                                </DataTemplate>
                            </BindableLayout.ItemTemplate>
                        </FlexLayout>
                    </yummy:PancakeView>
                </Grid>
                <!--  Other Pages  -->
                <yummy:PancakeView
                    Grid.Column="1"
                    Padding="10,10,10,10"
                    BackgroundColor="White"
                    CornerRadius="16">
                    <yummy:PancakeView.Shadow>
                        <yummy:DropShadow Offset="0,3" Color="#000000" />
                    </yummy:PancakeView.Shadow>
                    <yummy:PancakeView.Margin>
                        <Thickness>10,3,10,10</Thickness>
                    </yummy:PancakeView.Margin>
                    <yummy:PancakeView.Border>
                        <yummy:Border Thickness="1" Color="Color.Default" />
                    </yummy:PancakeView.Border>
                    <FlexLayout
                        AlignContent="Start"
                        AlignItems="Center"
                        BindableLayout.ItemsSource="{Binding OtherInfos}"
                        Direction="Row"
                        JustifyContent="Start"
                        Wrap="NoWrap">

                        <BindableLayout.ItemTemplate>
                            <DataTemplate>
                                <yummy:PancakeView
                                    BackgroundColor="White"
                                    CornerRadius="50"
                                    HeightRequest="100"
                                    WidthRequest="100">
                                    <yummy:PancakeView.Shadow>
                                        <yummy:DropShadow Offset="0,3" Color="#000000" />
                                    </yummy:PancakeView.Shadow>
                                    <yummy:PancakeView.Margin>
                                        <Thickness>10,3,10,10</Thickness>
                                    </yummy:PancakeView.Margin>
                                    <yummy:PancakeView.Border>
                                        <yummy:Border Thickness="1" Color="Color.Default" />
                                    </yummy:PancakeView.Border>
                                    <!--  Сделать PancakeView круглым  -->
                                    <Label
                                        HorizontalOptions="Center"
                                        Text="{Binding Title}"
                                        VerticalOptions="Center" />
                                    <yummy:PancakeView.GestureRecognizers>
                                        <TapGestureRecognizer Tapped="OnOtherPageTapped" />
                                    </yummy:PancakeView.GestureRecognizers>
                                </yummy:PancakeView>
                            </DataTemplate>
                        </BindableLayout.ItemTemplate>
                    </FlexLayout>
                </yummy:PancakeView>
            </StackLayout>
        </yummy:PancakeView>

    </ScrollView>

</ContentPage>